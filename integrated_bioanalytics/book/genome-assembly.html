<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>genome assembly | Integrated Bioanalytics</title>
<meta name="author" content="Lucas Busta and members of the Busta lab">
<meta name="description" content="3.19 Canu  3.19.1 Computer configuration Genome assembly requires computing resources - and since not all genomes are of equal size, the computing resources required for different assemblies may...">
<meta name="generator" content="bookdown 0.24.4 with bs4_book()">
<meta property="og:title" content="genome assembly | Integrated Bioanalytics">
<meta property="og:type" content="book">
<meta property="og:description" content="3.19 Canu  3.19.1 Computer configuration Genome assembly requires computing resources - and since not all genomes are of equal size, the computing resources required for different assemblies may...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="genome assembly | Integrated Bioanalytics">
<meta name="twitter:description" content="3.19 Canu  3.19.1 Computer configuration Genome assembly requires computing resources - and since not all genomes are of equal size, the computing resources required for different assemblies may...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.11/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><link href="libs/_Lato-0.4.0/font.css" rel="stylesheet">
<link href="libs/_Roboto%20Mono-0.4.0/font.css" rel="stylesheet">
<link href="libs/_Montserrat-0.4.0/font.css" rel="stylesheet">
<script src="libs/bs3compat-0.3.1.9000/transition.js"></script><script src="libs/bs3compat-0.3.1.9000/tabs.js"></script><script src="libs/bs3compat-0.3.1.9000/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png">
<script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-99618359-1', 'auto');
      ga('send', 'pageview');

    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="style/style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h2>
        <a href="index.html" title="">Integrated Bioanalytics</a>
      </h2>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">welcome</a></li>
<li class="book-part">basic data analysis in r</li>
<li><a class="" href="installation.html">installation</a></li>
<li><a class="" href="ggplot-and-markdown.html">ggplot and markdown</a></li>
<li><a class="" href="data-visualization.html">data visualization</a></li>
<li><a class="" href="ggplot-ii.html">ggplot II</a></li>
<li><a class="" href="import-and-tidying.html">import and tidying</a></li>
<li><a class="" href="the-pipe-and-summaries.html">the pipe and summaries</a></li>
<li class="book-part">advanced data analysis in r</li>
<li><a class="" href="wrangling.html">wrangling</a></li>
<li class="book-part">chemometrics</li>
<li><a class="" href="overview.html">overview</a></li>
<li><a class="" href="clustering.html">clustering</a></li>
<li><a class="" href="pca.html">pca</a></li>
<li><a class="" href="k-means.html">k-means</a></li>
<li><a class="" href="models.html">models</a></li>
<li><a class="" href="comparing-means.html">comparing means</a></li>
<li class="book-part">nanopore data</li>
<li><a class="" href="data-transfer.html">data transfer</a></li>
<li class="book-part">transcriptome analysis</li>
<li><a class="" href="transcriptomic-analyses.html">transcriptomic analyses</a></li>
<li class="book-part">genomic analysis</li>
<li><a class="active" href="genome-assembly.html">genome assembly</a></li>
<li class="book-part">evolutionary analysis</li>
<li><a class="" href="evolutionary-analyses.html">evolutionary analyses</a></li>
<li class="book-part">scientific writing</li>
<li><a class="" href="overview-1.html">overview</a></li>
<li><a class="" href="a-mini-manuscript.html">a mini manuscript</a></li>
<li><a class="" href="figures-captions.html"><span class="header-section-number">4</span> figures &amp; captions</a></li>
<li><a class="" href="results-and-discussion.html"><span class="header-section-number">5</span> results and discussion</a></li>
<li><a class="" href="conclusion-and-introduction.html">conclusion and introduction</a></li>
<li><a class="" href="abstract-and-title.html">abstract and title</a></li>
<li><a class="" href="proposals.html">proposals</a></li>
<li class="book-part">image analysis</li>
<li><a class="" href="section.html"></a></li>
<li><a class="" href="image-analysis.html">IMAGE ANALYSIS</a></li>
<li><a class="" href="image-color-analysis.html">image color analysis</a></li>
<li><a class="" href="images-of-mass-spectra.html"><span class="header-section-number">6</span> images of mass spectra</a></li>
<li class="book-part">appendix</li>
<li><a class="" href="links.html"><span class="header-section-number">7</span> links</a></li>
<li><a class="" href="r-faq.html"><span class="header-section-number">8</span> r faq</a></li>
<li><a class="" href="templates.html"><span class="header-section-number">9</span> templates</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/thebustalab/thebustalab.github.io/tree/master/integrated_bioanalytics">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="genome-assembly" class="section level1 unnumbered">
<h1>genome assembly<a class="anchor" aria-label="anchor" href="#genome-assembly"><i class="fas fa-link"></i></a>
</h1>
<div id="canu" class="section level2" number="3.19">
<h2>
<span class="header-section-number">3.19</span> Canu<a class="anchor" aria-label="anchor" href="#canu"><i class="fas fa-link"></i></a>
</h2>
<div id="computer-configuration" class="section level3" number="3.19.1">
<h3>
<span class="header-section-number">3.19.1</span> Computer configuration<a class="anchor" aria-label="anchor" href="#computer-configuration"><i class="fas fa-link"></i></a>
</h3>
<p>Genome assembly requires computing resources - and since not all genomes are of equal size, the computing resources required for different assemblies may differ. To run a genome assembly, start by determining what computing resources are available. Some helpful commands when investigating these resources on Linux machines:</p>
<p>Assessing RAM (It is recommended to assign about 75% of available RAM to the assembly process):</p>
<p><code>grep MeMTotal /proc/meminfo</code></p>
<p>Assessing CPU resources (note that ‚Äúthreads per CPU‚Äù can denote the availability of hyperthreading):</p>
<p><code>lscpu</code></p>
<p>Assessing disk space (Make sure you are running your assembly on a disk with lots of open space. Ideally &gt; 2TB):</p>
<p><code>df -h</code></p>
</div>
<div id="setting-up-canu" class="section level3" number="3.19.2">
<h3>
<span class="header-section-number">3.19.2</span> Setting up Canu<a class="anchor" aria-label="anchor" href="#setting-up-canu"><i class="fas fa-link"></i></a>
</h3>
<p>For assembly on the BustaLab storage box, navigate to the directory that contains your reads. Merge all reads into one file using:</p>
<p><code>cat *.fastq &gt; all_reads.fastq</code></p>
<p>Then use Canu to assemble, we suggest creating a file that contains the Canu call. You can create the file using <code>nano</code>. In it, try something like:</p>
<p><code>/home/grid/canu/canu-2.1.1/bin/canu -p k_fed -d /data/round2_pass_reads_assembly/ \ -genomeSize=232m -nanopore /data/all_reads.fastq \ -minReadLength=1000 -correctedErrorRate=0.12 -minOverlapLength=500 -useGrid=false -minInputCoverage=0.5 -stopOnLowCoverage=0.5 \ -corMemory=48 -corThreads=4 -hapMemory=48 -hapThreads=4 -merylMemory=48 -merylthreads=4 -batMemory=48 -batThreads=4</code></p>
<p>Notes on Canu options:</p>
<p>Defaults:</p>
<ul>
<li>minReadLength=1000</li>
<li>minOverlapLength=500bp</li>
<li>correctedErrorRate=0.114</li>
<li>stopOnLowCoverage &lt;integer=10&gt;</li>
</ul>
<p>Essentially only speed optimization:</p>
<ul>
<li>For over 30X coverage:</li>
<li>Nanopore flip-flop R9.4 or R10.3: try: <code>corMhapOptions=--threshold 0.8 ‚Äìordered-sketch-size 1000 ‚Äìordered-kmer-size 14‚Äô correctedErrorRate=0.105</code>
</li>
<li>For over 60X coverage: 2 recommendations were made, one said to decrease slightly (~1%). Another suggested using 12%
correctedErrorRate=0.12</li>
<li>Increasing minReadLength increases run time, increasing minOverlapLength improves assembly quality but increasing too much quickly degrades assemblies.</li>
</ul>
</div>
<div id="as-canu-runs" class="section level3" number="3.19.3">
<h3>
<span class="header-section-number">3.19.3</span> As Canu runs<a class="anchor" aria-label="anchor" href="#as-canu-runs"><i class="fas fa-link"></i></a>
</h3>
<p>Canu will take some time to run. As it goes along, you can both check on its progress and learn about the genome you are assembling from some intermediate results. Take the k-mer data in the .report file, process it with and run it at: <a href="http://qb.cshl.edu/genomescope/" class="uri">http://qb.cshl.edu/genomescope/</a>. This will give you approximate genome size, heterozygosity, repeat content, and read error rate. All good stuff to know!</p>
</div>
</div>
<div id="loading-gff-files" class="section level2" number="3.20">
<h2>
<span class="header-section-number">3.20</span> loading GFF files<a class="anchor" aria-label="anchor" href="#loading-gff-files"><i class="fas fa-link"></i></a>
</h2>
<!-- end -->
<hr>
<hr>
<hr>
</div>
</div>



<div class="chapter-nav">
<div class="prev"><a href="transcriptomic-analyses.html">transcriptomic analyses</a></div>
<div class="next"><a href="evolutionary-analyses.html">evolutionary analyses</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <h2>Note: Second Edition is under construction üèó</h2>
    <p>Now is a great time to provide feedback</p>
        <ul class="list-unstyled">
<li><a href="https://forms.gle/SZmB2Ct2exE2dBwv9">Provide feedback (5 min)</a></li>
          <!-- <li><a href="https://geocompr.robinlovelace.net/#reproducibility">Install updated packages</a></li> -->
          <!-- <li><a href="https://github.com/Robinlovelace/geocompr/issues">Open an issue <i class="fas fa-question"></i></a></li> -->
          <!-- <li><a href="https://discord.gg/Te3gWeDwmf">Chat on Discord <i class="fab fa-discord"></i></a></li> -->
        </ul>
<hr>
<nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#genome-assembly">genome assembly</a></li>
<li>
<a class="nav-link" href="#canu"><span class="header-section-number">3.19</span> Canu</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#computer-configuration"><span class="header-section-number">3.19.1</span> Computer configuration</a></li>
<li><a class="nav-link" href="#setting-up-canu"><span class="header-section-number">3.19.2</span> Setting up Canu</a></li>
<li><a class="nav-link" href="#as-canu-runs"><span class="header-section-number">3.19.3</span> As Canu runs</a></li>
</ul>
</li>
<li><a class="nav-link" href="#loading-gff-files"><span class="header-section-number">3.20</span> loading GFF files</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/thebustalab/thebustalab.github.io/tree/master/integrated_bioanalytics/blob/main/index.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/thebustalab/thebustalab.github.io/tree/master/integrated_bioanalytics/edit/main/index.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>
</div>
  

  

</div>
 <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Integrated Bioanalytics</strong>" was written by Lucas Busta and members of the Busta lab. It was last built on 2022-03-03.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
